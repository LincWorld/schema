{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schema.linc.world/draft-01/Channel.json",
  "title": "Channel",
  "type": "object",
  "properties": {
    "entityType": {
      "type": "string",
      "const": "channel"
    },
    "id": {
      "type": "string",
      "enum": [
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16"
      ],
      "description": "Input channel number on Linc device"
    },
    "device": {
      "$ref": "https://schema.linc.world/draft-01/Device.json"
    }
  },
  "oneOf": [
    {
      "title": "Channel with Current Transformer",
      "type": "object",
      "properties": {
        "sensor": {
          "title": "Sensor",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Type of sensor connected to input channel",
              "enum": [
                "https://schema.linc.world/en/st/ac/ct"
              ]
            },
            "model": {
              "type": "string",
              "description": "Model of sensor",
              "enum": [
                "https://schema.linc.world/en/sm/ac/ct/1",
                "https://schema.linc.world/en/sm/ac/ct/2",
                "https://schema.linc.world/en/sm/ac/ct/3",
                "https://schema.linc.world/en/sm/ac/ct/4",
                "https://schema.linc.world/en/sm/ac/ct/5",
                "https://schema.linc.world/en/sm/ac/ct/6",
                "https://schema.linc.world/en/sm/ac/ct/7",
                "https://schema.linc.world/en/sm/ac/ct/8",
                "https://schema.linc.world/en/sm/ac/ct/9"
              ]
            }
          }
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "integer"
              },
              "phase": {
                "type": "string",
                "enum": [
                  "L1",
                  "L2",
                  "L3"
                ]
              },
              "current": {
                "type": "object",
                "properties": {
                  "rms": {
                    "type": "integer",
                    "description": "Root mean square of current (mA)",
                    "minimum": 0
                  },
                  "peak": {
                    "type": "integer",
                    "description": "Waveform peak of current signal (mA)",
                    "minimum": 0
                  },
                  "crestFactor": {
                    "type": "number",
                    "description": "Ratio of waveform peaks in sampling period to RMS value",
                    "minimum": 0
                  }
                }
              },
              "power": {
                "type": "object",
                "properties": {
                  "active": {
                    "type": "integer",
                    "description": "Active component of power (W)"
                  },
                  "reactive": {
                    "type": "integer",
                    "description": "Reactive component of power (W)"
                  },
                  "apparent": {
                    "type": "integer",
                    "description": "Apparent component of power (W)"
                  }
                }
              },
              "powerFactor": {
                "type": "object",
                "properties": {
                  "truePowerFactor": {
                    "type": "number",
                    "description": "Total of displacement and distortion power factors"
                  },
                  "displacementPowerFactor": {
                    "type": "number",
                    "description": "Power factor due to phase shift between voltage and current at the fundamental line frequency"
                  },
                  "distortionPowerFactor": {
                    "type": "number",
                    "description": "Power factor due to harmonic distortions in signal"
                  }
                }
              },
              "energy": {
                "type": "object",
                "properties": {
                  "active": {
                    "type": "integer",
                    "description": "Active component of energy consumed (mWh)"
                  },
                  "reactive": {
                    "type": "integer",
                    "description": "Reactive component of energy consumed (mWh)"
                  },
                  "apparent": {
                    "type": "integer",
                    "description": "Apparent component of energy consumed (mWh)"
                  }
                }
              },
              "harmonicDistortion": {
                "title": "Harmonic Distortion",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "totalHarmonicDistortion": {
                    "type": "number",
                    "description": "Percentage of all significant harmonic components to the fundamental line frequency"
                  },
                  "totalInterharmonicDistortion": {
                    "type": "number",
                    "description": "Percentage of all significant inter-harmonic components to the fundamental line frequency"
                  }
                }
              },
              "harmonicValues": {
                "type": "array",
                "items": {
                  "title": "Harmonic Values",
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "bin": {
                      "type": "integer",
                      "description": "Frequency bins of harmonic and inter-harmonic subgroups"
                    },
                    "value": {
                      "type": "number",
                      "description": "Percent component of signal in frequency bin"
                    }
                  }
                },
                "uniqueItems": true
              }
            }
          },
          "uniqueItems": true
        }
      }
    },
    {
      "title": "Channel with Rogowski Coil",
      "type": "object",
      "properties": {
        "sensor": {
          "title": "Sensor",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Type of sensor connected to input channel",
              "enum": [
                "https://schema.linc.world/en/st/ac/rc"
              ]
            },
            "model": {
              "type": "string",
              "description": "Model of sensor",
              "enum": [
                "https://schema.linc.world/en/sm/ac/rc/1",
                "https://schema.linc.world/en/sm/ac/rc/2",
                "https://schema.linc.world/en/sm/ac/rc/3",
                "https://schema.linc.world/en/sm/ac/rc/4",
                "https://schema.linc.world/en/sm/ac/rc/5",
                "https://schema.linc.world/en/sm/ac/rc/6",
                "https://schema.linc.world/en/sm/ac/rc/7",
                "https://schema.linc.world/en/sm/ac/rc/8",
                "https://schema.linc.world/en/sm/ac/rc/9"
              ]
            }
          }
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "integer"
              },
              "phase": {
                "type": "string",
                "enum": [
                  "L1",
                  "L2",
                  "L3"
                ]
              },
              "current": {
                "type": "object",
                "properties": {
                  "rms": {
                    "type": "integer",
                    "description": "Root mean square of current (mA)",
                    "minimum": 0
                  },
                  "peak": {
                    "type": "integer",
                    "description": "Waveform peak of current signal (mA)",
                    "minimum": 0
                  },
                  "crestFactor": {
                    "type": "number",
                    "description": "Ratio of waveform peaks in sampling period to RMS value",
                    "minimum": 0
                  }
                }
              },
              "power": {
                "type": "object",
                "properties": {
                  "active": {
                    "type": "integer",
                    "description": "Active component of power (W)"
                  },
                  "reactive": {
                    "type": "integer",
                    "description": "Reactive component of power (W)"
                  },
                  "apparent": {
                    "type": "integer",
                    "description": "Apparent component of power (W)"
                  }
                }
              },
              "powerFactor": {
                "type": "object",
                "properties": {
                  "truePowerFactor": {
                    "type": "number",
                    "description": "Total of displacement and distortion power factors"
                  },
                  "displacementPowerFactor": {
                    "type": "number",
                    "description": "Power factor due to phase shift between voltage and current at the fundamental line frequency"
                  },
                  "distortionPowerFactor": {
                    "type": "number",
                    "description": "Power factor due to harmonic distortions in signal"
                  }
                }
              },
              "energy": {
                "type": "object",
                "properties": {
                  "active": {
                    "type": "integer",
                    "description": "Active component of energy consumed (mWh)"
                  },
                  "reactive": {
                    "type": "integer",
                    "description": "Reactive component of energy consumed (mWh)"
                  },
                  "apparent": {
                    "type": "integer",
                    "description": "Apparent component of energy consumed (mWh)"
                  }
                }
              },
              "harmonicDistortion": {
                "title": "Harmonic Distortion",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "totalHarmonicDistortion": {
                    "type": "number",
                    "description": "Percentage of all significant harmonic components to the fundamental line frequency"
                  },
                  "totalInterharmonicDistortion": {
                    "type": "number",
                    "description": "Percentage of all significant inter-harmonic components to the fundamental line frequency"
                  }
                }
              },
              "harmonicValues": {
                "type": "array",
                "items": {
                  "title": "Harmonic Values",
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "bin": {
                      "type": "integer",
                      "description": "Frequency bins of harmonic and inter-harmonic subgroups"
                    },
                    "value": {
                      "type": "number",
                      "description": "Percent component of signal in frequency bin"
                    }
                  }
                },
                "uniqueItems": true
              }
            }
          },
          "uniqueItems": true
        }
      }
    },
    {
      "title": "Channel with DC Input",
      "type": "object",
      "properties": {
        "sensor": {
          "title": "Sensor",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Type of sensor connected to input channel",
              "enum": [
                "https://schema.linc.world/en/st/dc"
              ]
            }
          }
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "integer"
              }
            }
          },
          "uniqueItems": true
        }
      }
    },
    {
      "title": "Channel with Temperature Sensor",
      "type": "object",
      "properties": {
        "sensor": {
          "title": "Sensor",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Type of sensor connected to input channel",
              "enum": [
                "https://schema.linc.world/en/st/temp"
              ]
            },
            "model": {
              "type": "string",
              "description": "Model of sensor",
              "enum": [
                "https://schema.linc.world/en/sm/temp/1",
                "https://schema.linc.world/en/sm/temp/2"
              ]
            }
          }
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "integer"
              },
              "temperature": {
                "type": "number",
                "description": "Temperature (°C)"
              }
            }
          },
          "uniqueItems": true
        }
      }
    }
  ]
}
